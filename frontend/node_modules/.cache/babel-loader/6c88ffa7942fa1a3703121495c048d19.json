{"ast":null,"code":"import _classCallCheck from\"C:/study projects/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/study projects/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._baseUrl=options.baseUrl;this._token=options.headers.authorization;}// получение информации пользователя в формате name: res.name, about: res.about, avatar: res.avatar, id: res._id\n_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/users/me\"),{headers:{authorization:\"\".concat(this._token)}}).then(function(res){return _this._getResponseData(res);});}// обновление информации пользователя\n},{key:\"updateUserInfo\",value:function updateUserInfo(newName,newNote){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/users/me\"),{method:'PATCH',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'},body:JSON.stringify({name:newName,about:newNote})}).then(function(res){return _this2._getResponseData(res);});}// получение начальных карточек\n},{key:\"getInitialCards\",value:function getInitialCards(){var _this3=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards\"),{method:'GET',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'}}).then(function(res){return _this3._getResponseData(res);});}// добавление новой карточки\n},{key:\"addCard\",value:function addCard(imageName,imageLink){var _this4=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards\"),{method:'POST',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'},body:JSON.stringify({name:imageName,link:imageLink})}).then(function(res){return _this4._getResponseData(res);});}// получение данных карточек\n},{key:\"getCardsInfo\",value:function getCardsInfo(){var _this5=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards\"),{method:'GET',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'}}).then(function(res){return _this5._getResponseData(res);});}// удаление карточки по id\n},{key:\"removeCard\",value:function removeCard(id){var _this6=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards/\").concat(id),{method:'DELETE',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'}}).then(function(res){return _this6._getResponseData(res);});}// добавление карточке лайка по id\n},{key:\"addLike\",value:function addLike(id){var _this7=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'}}).then(function(res){return _this7._getResponseData(res);});}// удаление лайка по id\n},{key:\"removeLike\",value:function removeLike(id){var _this8=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'}}).then(function(res){return _this8._getResponseData(res);}).then(function(res){return res;});}// изменение аватара\n},{key:\"changeAvatar\",value:function changeAvatar(avatarUrl){var _this9=this;return fetch(\"\".concat(this._baseUrl,\"/cohort-34/users/me/avatar\"),{method:'PATCH',headers:{authorization:\"\".concat(this._token),'Content-Type':'application/json'},body:JSON.stringify({avatar:avatarUrl})}).then(function(res){return _this9._getResponseData(res);});}},{key:\"_getResponseData\",value:function _getResponseData(res){return!res.ok?Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status)):res.json();}}]);return Api;}();var api=new Api({baseUrl:'https://nomoreparties.co/v1',headers:{authorization:'6a51e53e-46b7-4c82-b7df-ab43a73f6f4d'}});export default api;","map":{"version":3,"sources":["C:/study projects/react-mesto-auth/src/utils/api.js"],"names":["Api","options","_baseUrl","baseUrl","_token","headers","authorization","fetch","then","res","_getResponseData","newName","newNote","method","body","JSON","stringify","name","about","imageName","imageLink","link","id","avatarUrl","avatar","ok","Promise","reject","status","json","api"],"mappings":"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","sourcesContent":["class Api {\r\n    constructor(options) {\r\n        this._baseUrl = options.baseUrl;\r\n        this._token = options.headers.authorization;\r\n    }\r\n\r\n    // получение информации пользователя в формате name: res.name, about: res.about, avatar: res.avatar, id: res._id\r\n    getUserInfo() {\r\n        return fetch(`${this._baseUrl}/cohort-34/users/me`, {\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // обновление информации пользователя\r\n    updateUserInfo(newName, newNote) {\r\n        return fetch(`${this._baseUrl}/cohort-34/users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: newName,\r\n                about: newNote\r\n            })\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // получение начальных карточек\r\n    getInitialCards() {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards`, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // добавление новой карточки\r\n    addCard(imageName, imageLink) {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: imageName,\r\n                link: imageLink\r\n            })\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // получение данных карточек\r\n    getCardsInfo() {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards`, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // удаление карточки по id\r\n    removeCard(id) {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // добавление карточке лайка по id\r\n    addLike(id) {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards/${id}/likes`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    // удаление лайка по id\r\n    removeLike(id) {\r\n        return fetch(`${this._baseUrl}/cohort-34/cards/${id}/likes`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        }).then((res) => {\r\n            return res;\r\n        });\r\n    }\r\n\r\n    // изменение аватара\r\n    changeAvatar(avatarUrl) {\r\n        return fetch(`${this._baseUrl}/cohort-34/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: `${this._token}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                avatar: avatarUrl,\r\n            })\r\n        }).then((res) => {\r\n            return this._getResponseData(res);\r\n        });\r\n    }\r\n\r\n    _getResponseData(res) {\r\n        return (!res.ok) ? Promise.reject(`Ошибка: ${res.status}`) : res.json();\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    baseUrl: 'https://nomoreparties.co/v1',\r\n    headers: {\r\n        authorization: '6a51e53e-46b7-4c82-b7df-ab43a73f6f4d'\r\n    }\r\n});\r\n\r\nexport default api;"]},"metadata":{},"sourceType":"module"}